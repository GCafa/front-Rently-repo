<div class="relative">
  <nav class="navbar navbar-light bg-light border-bottom px-5 sticky-top">
    <div class="container-fluid">
      <a class="navbar-brand fw-bolder" [routerLink]="['/home']">Rently</a>

      <div class="d-flex align-items-center">
        <!-- Componente Notifiche -->
        <app-notifications class="me-3"></app-notifications>

        <div class="dropdown">
          <button class="btn btn-link nav-link dropdown-toggle" type="button" id="userMenuButton"
                  data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fa-solid fa-user"></i>
          </button>

          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenuButton">
            <!-- Header utente -->
            <li class="px-3 pt-3 pb-2">
              <div class="d-flex align-items-center justify-content-between mb-2"></div>

              <div class="d-flex align-items-center">
                <div class="avatar-circle">
                  <img [src]="ApiPathUtil.getImageBaseUrl() + user?.imageUrl"
                       (error)="onImageError()"
                       alt="Foto profilo"
                       class="profile-image"
                       *ngIf="!loading && user?.imageUrl">
                  <div class="no-image" *ngIf="!loading && !user?.imageUrl">
                    <span>Nessuna immagine profilo</span>
                  </div>
                </div>
                <div class="user-info ms-3">
                  <span class="fw-bold">{{ username }}</span>
                  <span class="text-muted text-sm d-block">{{ userRole }}</span>
                </div>
              </div>
            </li>

            <li><hr class="dropdown-divider"></li>

            <!-- Voci di menu dinamiche -->
            <li *ngFor="let item of menuItems">
              <a class="dropdown-item" href="#" (click)="$event.preventDefault(); item.command()" *ngIf="item.visible">
                <i [class]="item.icon"></i>
                <span class="ms-2">{{ item.label }}</span>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </nav>
</div>
